"use strict";(self.webpackChunkGenLV=self.webpackChunkGenLV||[]).push([[264],{264:(O,m,g)=>{g.r(m),g.d(m,{SchneiderComponent:()=>T});var h=g(177),d=g(341),t=g(540);function f(s,u){if(1&s){const e=t.RV6();t.j41(0,"div",19)(1,"label"),t.EFF(2),t.k0s(),t.j41(3,"label"),t.EFF(4,"Logic Vector:"),t.k0s(),t.j41(5,"input",20),t.bIt("ngModelChange",function(n){const a=t.eBV(e).$implicit;return t.Njj(a.signature=n)}),t.k0s(),t.j41(6,"label"),t.EFF(7,"Inputs:"),t.k0s(),t.j41(8,"input",6),t.bIt("ngModelChange",function(n){const a=t.eBV(e).$implicit;return t.Njj(a.inputs=n)}),t.k0s(),t.j41(9,"label"),t.EFF(10,"Output:"),t.k0s(),t.j41(11,"input",21),t.bIt("ngModelChange",function(n){const a=t.eBV(e).$implicit;return t.Njj(a.output=n)}),t.k0s(),t.j41(12,"button",8),t.bIt("click",function(){const o=t.eBV(e).$implicit,a=t.XpG();return t.Njj(a.removeGate(o.id))}),t.EFF(13,"Remove"),t.k0s()()}if(2&s){const e=u.$implicit;t.R7$(2),t.SpI("Gate ",e.id,": "),t.R7$(3),t.Y8G("ngModel",e.signature),t.R7$(3),t.Y8G("ngModel",e.inputs),t.R7$(3),t.Y8G("ngModel",e.output)}}function x(s,u){if(1&s&&(t.j41(0,"div")(1,"strong"),t.EFF(2,"Result:"),t.k0s(),t.EFF(3),t.k0s()),2&s){const e=t.XpG();t.R7$(3),t.SpI(" ",e.resultVectors," ")}}function G(s,u){if(1&s&&(t.qSk(),t.j41(0,"g"),t.nrm(1,"circle",22),t.j41(2,"text",23),t.EFF(3),t.k0s()()),2&s){const e=u.$implicit;t.R7$(1),t.BMQ("cx",e.x)("cy",e.y),t.R7$(1),t.BMQ("x",e.x-30)("y",e.y+5),t.R7$(1),t.JRh(e.index)}}function b(s,u){if(1&s&&(t.qSk(),t.nrm(0,"line",25)),2&s){const e=t.XpG().$implicit,i=t.XpG().$implicit,n=t.XpG();t.BMQ("x1",n.layoutInputs[e-1].x)("y1",n.layoutInputs[e-1].y)("x2",i.x)("y2",i.y+20)}}function C(s,u){if(1&s&&(t.qSk(),t.nrm(0,"line",25)),2&s){const e=t.XpG().$implicit,i=t.XpG(2).$implicit;t.BMQ("x1",e.x+50)("y1",e.y+20)("x2",i.x)("y2",i.y+20)}}function k(s,u){if(1&s&&(t.qSk(),t.qex(0),t.DNE(1,C,1,4,"line",24),t.bVm()),2&s){const e=u.$implicit,i=t.XpG().$implicit,n=t.XpG(2);t.R7$(1),t.Y8G("ngIf",+i>n.numInputs&&e.gate.output===+i)}}function I(s,u){if(1&s&&(t.qSk(),t.qex(0),t.DNE(1,b,1,4,"line",24),t.DNE(2,k,2,1,"ng-container",11),t.bVm()),2&s){const e=u.$implicit,i=t.XpG(2);t.R7$(1),t.Y8G("ngIf",+e<=i.numInputs),t.R7$(1),t.Y8G("ngForOf",i.layoutGates)}}function F(s,u){if(1&s&&(t.qSk(),t.qex(0),t.DNE(1,I,3,2,"ng-container",11),t.bVm()),2&s){const e=u.$implicit;t.R7$(1),t.Y8G("ngForOf",e.gate.inputs)}}function y(s,u){if(1&s&&(t.qSk(),t.j41(0,"g"),t.nrm(1,"rect",26),t.j41(2,"text",27),t.EFF(3),t.k0s()()),2&s){const e=u.$implicit;t.R7$(1),t.BMQ("x",e.x)("y",e.y),t.R7$(1),t.BMQ("x",e.x+25)("y",e.y+25),t.R7$(1),t.JRh(e.gate.output)}}function S(s,u){if(1&s&&(t.qSk(),t.j41(0,"g"),t.nrm(1,"rect",28),t.j41(2,"text",29),t.EFF(3,"Q"),t.k0s(),t.nrm(4,"line",30),t.k0s()),2&s){const e=t.XpG();t.R7$(1),t.BMQ("y",e.layoutGates[e.layoutGates.length-1].y),t.R7$(1),t.BMQ("y",e.layoutGates[e.layoutGates.length-1].y+25),t.R7$(2),t.BMQ("x1",e.layoutGates[e.layoutGates.length-1].x+50)("y1",e.layoutGates[e.layoutGates.length-1].y+20)("y2",e.layoutGates[e.layoutGates.length-1].y+20)}}function R(s,u){if(1&s&&(t.j41(0,"th",35),t.EFF(1),t.k0s()),2&s){const e=u.index;t.R7$(1),t.SpI("In",e+1,"")}}function M(s,u){if(1&s&&(t.j41(0,"th",35),t.EFF(1),t.k0s()),2&s){const e=u.$implicit;t.R7$(1),t.SpI("G",e.output,"")}}function j(s,u){if(1&s&&(t.j41(0,"td",35),t.EFF(1),t.k0s()),2&s){const e=u.$implicit;t.xc7("background","#e3f2fd"),t.R7$(1),t.JRh(e)}}function $(s,u){if(1&s&&(t.j41(0,"td",35),t.EFF(1),t.k0s()),2&s){const e=u.$implicit,i=t.XpG().$implicit;t.R7$(1),t.JRh(i.gateResults[e.output])}}function v(s,u){if(1&s&&(t.j41(0,"tr"),t.DNE(1,j,2,3,"td",36),t.DNE(2,$,2,1,"td",33),t.j41(3,"td",37),t.EFF(4),t.k0s()()),2&s){const e=u.$implicit,i=t.XpG(2);t.R7$(1),t.Y8G("ngForOf",e.inputs),t.R7$(1),t.Y8G("ngForOf",i.gates),t.R7$(2),t.JRh(e.output)}}const E=function(){return[]};function w(s,u){if(1&s&&(t.qSk(),t.joV(),t.j41(0,"div",31)(1,"table",32)(2,"thead")(3,"tr"),t.DNE(4,R,2,1,"th",33),t.DNE(5,M,2,1,"th",33),t.j41(6,"th",34),t.EFF(7,"Q"),t.k0s()()(),t.j41(8,"tbody"),t.DNE(9,v,5,3,"tr",11),t.k0s()()()),2&s){const e=t.XpG();t.R7$(4),t.Y8G("ngForOf",t.lJ4(3,E).constructor(e.numInputs)),t.R7$(1),t.Y8G("ngForOf",e.gates),t.R7$(4),t.Y8G("ngForOf",e.truthTableRows)}}function N(s,u){if(1&s){const e=t.RV6();t.j41(0,"div",38),t.nrm(1,"img",39),t.j41(2,"button",40),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.sideImageUrl=null)}),t.EFF(3,"Delete Image"),t.k0s()()}if(2&s){const e=t.XpG();t.R7$(1),t.Y8G("src",e.sideImageUrl,t.B4B)}}let T=(()=>{class s{constructor(){this.numInputs=4,this.gates=[],this.connections=[],this.resultVectors="",this.signals={},this.nextGateId=1,this.nextSignalId=5,this.newGateType="AND",this.newGateInputs="",this.newGateOutput=this.nextSignalId,this.newGateSignature="",this.inputVectors=["",""],this.layoutGates=[],this.layoutInputs=[],this.sideImageUrl=null,this.truthTableRows=[],this.addInitialGates()}addInitialGates(){this.addGate("1000","1, 3",5),this.addGate("1000","2, 3",6),this.addGate("1000","2, 4",7),this.addGate("1000","2, 5",8),this.addGate("1000","1, 6",9),this.addGate("1000","4, 6",10),this.addGate("1000","3, 7",11),this.addGate("1000000000000000","8, 9, 10, 11",12)}get Math(){return Math}addGate(e,i,n){const o={id:this.nextGateId++,signature:e,inputs:i,output:n};this.gates.push(o),this.nextSignalId=Math.max(this.nextSignalId,n+1)}addNewGate(){this.addGate(this.newGateSignature,this.newGateInputs,this.newGateOutput),this.newGateOutput=this.nextSignalId,this.newGateInputs="",this.newGateSignature=""}updateInputs(e,i){}removeGate(e){this.gates=this.gates.filter(i=>i.id!==e),this.connections=this.connections.filter(i=>i.fromGate!==e&&i.toGate!==e)}addConnection(e,i,n){this.connections.push({fromGate:e,toGate:i,toInputIndex:n})}removeConnection(e,i,n){this.connections=this.connections.filter(o=>o.fromGate!==e||o.toGate!==i||o.toInputIndex!==n)}generateInputCombinations(){const e=[],i=1<<this.numInputs;for(let n=0;n<i;n++){const o=n.toString(2).padStart(this.numInputs,"0").split("").map(Number);e.push(o)}return e}processAllCombinations(){this.truthTableRows=[];const e=this.generateInputCombinations();this.resultVectors=e.map(i=>{this.signals={};for(let l=0;l<i.length;l++)this.signals[l+1]=i[l];const n={};for(const l of this.gates){const r=l.inputs.replace(/\s+/g,"").split(",").map(Number).filter(Number).map(p=>this.signals[p]??0),c=this.evaluateGateBySignature(l.signature,r);this.signals[l.output]=c,n[l.output]=c}let o;this.gates.length>0&&(o=this.gates.reduce((l,r)=>l.output>r.output?l:r));const a=o&&this.signals[o.output]||0;return this.truthTableRows.push({inputs:[...i],gateResults:{...n},output:a}),a}).join("")}processCircuit(e){this.signals={};for(let n=0;n<e.length;n++)this.signals[n+1]=e[n];for(const n of this.gates){const o=n.inputs.replace(/\s+/g,"").split(",").map(Number).filter(Number).map(a=>this.signals[a]??0);this.signals[n.output]=this.evaluateGateBySignature(n.signature,o)}let i;return this.gates.length>0&&(i=this.gates.reduce((n,o)=>n.output>o.output?n:o)),i&&this.signals[i.output]||0}evaluateGateBySignature(e,i){if(!e||0===i.length)return 0;const n=parseInt(i.join(""),2),o=e.split("").map(Number);return void 0!==o[n]?o[n]:0}isValidBinaryVector(e){return/^[01]+$/.test(e)}processCartesianScheme(){if(this.inputVectors.some(a=>!this.isValidBinaryVector(a)))return void alert("\u0412\u0441\u0435 \u0432\u0445\u043e\u0434\u043d\u044b\u0435 \u0432\u0435\u043a\u0442\u043e\u0440\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e 0 \u0438\u043b\u0438 1");const e=this.inputVectors.map(a=>a.split("").map(Number));if(e.some(a=>0===a.length))return void alert("\u0412\u0441\u0435 \u0432\u0435\u043a\u0442\u043e\u0440\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0431\u044b\u0442\u044c \u043d\u0435\u043f\u0443\u0441\u0442\u044b\u043c\u0438");const o=(a=e,a.reduce((l,r)=>l.flatMap(c=>r.map(p=>c.concat([p]))),[[]])).map(a=>{this.signals={};for(let r=0;r<a.length;r++)this.signals[r+1]=a[r];for(const r of this.gates){const c=r.inputs.replace(/\s+/g,"").split(",").map(Number).filter(Number).map(p=>this.signals[p]??0);this.signals[r.output]=this.evaluateGateBySignature(r.signature,c)}let l;return this.gates.length>0&&(l=this.gates.reduce((r,c)=>r.output>c.output?r:c)),l&&this.signals[l.output]||0});var a;this.resultVectors=o.join("")}onImageSelected(e){const i=e.target.files&&e.target.files[0];if(!i)return;const n=new FileReader;n.onload=o=>{this.sideImageUrl=o.target.result},n.readAsDataURL(i)}onImagePaste(e){const i=e.clipboardData?.items;if(i)for(let n=0;n<i.length;n++){const o=i[n];if(-1!==o.type.indexOf("image")){const a=o.getAsFile();if(a){const l=new FileReader;l.onload=r=>{this.sideImageUrl=r.target.result},l.readAsDataURL(a)}}}}ngDoCheck(){this.updateLayout()}updateLayout(){const e=new Map,i=l=>{if(e.has(l.id))return e.get(l.id);let r=0;for(const c of l.inputs.replace(/\s+/g,"").split(",").map(Number).filter(Number)){if(c<=this.numInputs)continue;const p=this.gates.find(_=>_.output===c);p&&(r=Math.max(r,i(p)+1))}return e.set(l.id,r),r},n=[];for(const l of this.gates){const r=i(l);n[r]||(n[r]=[]),n[r].push(l)}this.layoutInputs=Array.from({length:this.numInputs},(l,r)=>({index:r+1,x:60,y:80+80*r})),this.layoutGates=[],n.forEach((l,r)=>{l.forEach((c,p)=>{const _={...c};_.inputs=_.inputs.replace(/\s+/g,"").split(",").map(Number).filter(Number),this.layoutGates.push({gate:_,x:200+160*r,y:80+100*p,level:r})})})}static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-schneider"]],standalone:!0,features:[t.aNF],decls:44,vars:12,consts:[[1,"container",2,"display","flex","flex-direction","row","align-items","flex-start"],[2,"flex","1"],["for","numInputs"],["id","numInputs","type","number","placeholder","e.g., 4",3,"ngModel","ngModelChange"],["class","gate-config",4,"ngFor","ngForOf"],["placeholder","example, 0110",3,"ngModel","ngModelChange"],["placeholder","e.g., 1,2,3",3,"ngModel","ngModelChange"],["type","number","placeholder","e.g., 5",3,"ngModel","ngModelChange"],[3,"click"],[4,"ngIf"],["width","900","height","500",2,"background","#f9f9f9","margin","20px 0"],[4,"ngFor","ngForOf"],["id","arrow","markerWidth","8","markerHeight","8","refX","8","refY","4","orient","auto","markerUnits","strokeWidth"],["d","M0,0 L8,4 L0,8 L2,4 Z","fill","#888"],["style","margin-top: 32px; overflow-x: auto;",4,"ngIf"],[1,"side-image",2,"width","480px","min-height","280px","margin-left","32px","display","flex","flex-direction","column","align-items","center","justify-content","flex-start","background","#fafbfc","border-radius","16px","box-shadow","0 2px 8px #0001","padding","24px","position","sticky","top","24px","z-index","10",3,"paste"],[2,"font-size","1.5rem","margin-bottom","24px"],["type","file","accept","image/*",2,"margin-bottom","24px",3,"change"],["style","margin-top: 16px; display: flex; flex-direction: column; align-items: center; justify-content: center;",4,"ngIf"],[1,"gate-config"],["placeholder","\u043d\u0430\u043f\u0440\u0438\u043c\u0435\u0440, 0110",3,"ngModel","ngModelChange"],["placeholder","e.g., 5",3,"ngModel","ngModelChange"],["r","16","fill","#b3e5fc"],["font-size","20"],["stroke","#90caf9","stroke-width","3","marker-end","url(#arrow)",4,"ngIf"],["stroke","#90caf9","stroke-width","3","marker-end","url(#arrow)"],["width","50","height","40","rx","10","fill","#ffe082","stroke","#888"],["font-size","18","text-anchor","middle"],["x","800","width","50","height","40","rx","10","fill","#c8e6c9","stroke","#888"],["x","825","font-size","18","text-anchor","middle"],["x2","800","stroke","#a5d6a7","stroke-width","3","marker-end","url(#arrow)"],[2,"margin-top","32px","overflow-x","auto"],[2,"border-collapse","collapse","margin","0 auto","background","#f8fafd"],["style","padding: 4px 8px; border: 1px solid #bbb;",4,"ngFor","ngForOf"],[2,"padding","4px 8px","border","1px solid #bbb","background","#e0f7fa"],[2,"padding","4px 8px","border","1px solid #bbb"],["style","padding: 4px 8px; border: 1px solid #bbb;",3,"background",4,"ngFor","ngForOf"],[2,"padding","4px 8px","border","1px solid #bbb","background","#e0f7fa","font-weight","bold"],[2,"margin-top","16px","display","flex","flex-direction","column","align-items","center","justify-content","center"],["alt","\u0421\u0445\u0435\u043c\u0430",2,"max-width","100%","max-height","100%","border","1px solid #ccc","border-radius","12px","background","#fff","margin-bottom","12px",3,"src"],[2,"margin-top","8px",3,"click"]],template:function(i,n){1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"h1"),t.EFF(3,"Schneider Logic Circuit"),t.k0s(),t.j41(4,"label",2),t.EFF(5,"Number of Inputs:"),t.k0s(),t.j41(6,"input",3),t.bIt("ngModelChange",function(a){return n.numInputs=a}),t.k0s(),t.j41(7,"h3"),t.EFF(8,"Gates"),t.k0s(),t.DNE(9,f,14,4,"div",4),t.j41(10,"h3"),t.EFF(11,"Add New Gate"),t.k0s(),t.j41(12,"label"),t.EFF(13," Logic Vector:"),t.k0s(),t.j41(14,"input",5),t.bIt("ngModelChange",function(a){return n.newGateSignature=a}),t.k0s(),t.j41(15,"label"),t.EFF(16,"Inputs:"),t.k0s(),t.j41(17,"input",6),t.bIt("ngModelChange",function(a){return n.newGateInputs=a}),t.k0s(),t.j41(18,"label"),t.EFF(19,"Output:"),t.k0s(),t.j41(20,"input",7),t.bIt("ngModelChange",function(a){return n.newGateOutput=a}),t.k0s(),t.j41(21,"button",8),t.bIt("click",function(){return n.addNewGate()}),t.EFF(22,"Add Gate"),t.k0s(),t.j41(23,"p")(24,"button",8),t.bIt("click",function(){return n.processAllCombinations()}),t.EFF(25,"Get Result"),t.k0s()(),t.DNE(26,x,4,1,"div",9),t.qSk(),t.j41(27,"svg",10),t.DNE(28,G,4,5,"g",11),t.DNE(29,F,2,1,"ng-container",11),t.DNE(30,y,4,5,"g",11),t.DNE(31,S,5,5,"g",9),t.j41(32,"defs")(33,"marker",12),t.nrm(34,"path",13),t.k0s()()(),t.DNE(35,w,10,4,"div",14),t.k0s(),t.joV(),t.j41(36,"div",15),t.bIt("paste",function(a){return n.onImagePaste(a)}),t.j41(37,"h3",16),t.EFF(38,"Paste Circuit image "),t.nrm(39,"br"),t.j41(40,"small"),t.EFF(41,"(or CTRL + V)"),t.k0s()(),t.j41(42,"input",17),t.bIt("change",function(a){return n.onImageSelected(a)}),t.k0s(),t.DNE(43,N,4,1,"div",18),t.k0s()()),2&i&&(t.R7$(6),t.Y8G("ngModel",n.numInputs),t.R7$(3),t.Y8G("ngForOf",n.gates),t.R7$(5),t.Y8G("ngModel",n.newGateSignature),t.R7$(3),t.Y8G("ngModel",n.newGateInputs),t.R7$(3),t.Y8G("ngModel",n.newGateOutput),t.R7$(6),t.Y8G("ngIf",n.resultVectors),t.R7$(2),t.Y8G("ngForOf",n.layoutInputs),t.R7$(1),t.Y8G("ngForOf",n.layoutGates),t.R7$(1),t.Y8G("ngForOf",n.layoutGates),t.R7$(1),t.Y8G("ngIf",n.layoutGates.length),t.R7$(4),t.Y8G("ngIf",n.truthTableRows.length),t.R7$(8),t.Y8G("ngIf",n.sideImageUrl))},dependencies:[d.YN,d.me,d.Q0,d.BC,d.vS,h.MD,h.Sq,h.bT],styles:[".container[_ngcontent-%COMP%]{text-align:center;margin:20px}input[_ngcontent-%COMP%]{margin:10px;padding:5px;width:100px}button[_ngcontent-%COMP%]{padding:5px 10px;cursor:pointer}.circuit[_ngcontent-%COMP%]{margin-top:20px;border:1px solid #ccc}text[_ngcontent-%COMP%]{font-family:Arial,sans-serif;font-size:14px;fill:#000}rect[_ngcontent-%COMP%]{stroke:#000;stroke-width:1}line[_ngcontent-%COMP%]{stroke-width:2}label[_ngcontent-%COMP%]{display:inline}select[_ngcontent-%COMP%]{margin:5px}"]})}}return s})()}}]);